<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeGenius - مولد کد حرفه‌ای</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/trumbowyg@2.27.3/dist/ui/trumbowyg.min.css">
    <style>
        :root {
            --primary-color: #0d6efd; --secondary-color: #6c757d; --success-color: #198754;
            --danger-color: #dc3545; --light-bg: #f8f9fa; --dark-text: #212529;
            --border-color: #dee2e6; --header-bg: #f1f3f5;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6; background-color: #111827; /* Dark Navy Blue */
            color: var(--dark-text); padding: 20px;
        }
        .generator-container {
            max-width: 950px; margin: 20px auto; background-color: #fff;
            padding: 30px; border-radius: 10px; box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }
        .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
        h1 { border-bottom: none; margin: 0; padding: 0; }
        h1 small { font-size: 1rem; color: var(--secondary-color); }
        
        .block-editor { border: 1px solid var(--border-color); border-radius: 12px; margin-bottom: 25px; background-color: var(--light-bg); box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow: hidden; }
        .block-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background-color: var(--header-bg); border-bottom: 1px solid var(--border-color); }
        .block-header h4, .block-header h5 { margin: 0; font-size: 1.1rem; color: var(--dark-text); }
        .block-header-controls { display: flex; align-items: center; gap: 10px; }
        .block-content { padding: 20px; }

        .example-editor { background-color: #fff; border: 1px dashed var(--border-color); border-radius: 8px; padding: 0; margin-top: 20px; position: relative; overflow: hidden; }
        
        label { font-weight: 600; display: block; margin: 15px 0 5px; color: #495057; }
        input, textarea { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #ced4da; font-family: inherit; font-size: 1rem; transition: border-color 0.2s, box-shadow 0.2s; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25); outline: none; }
        .code-input { direction: ltr; text-align: left; font-family: monospace; }
        
        .btn, .icon-btn { padding: 10px 20px; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-lg { padding: 12px 24px; font-size: 1.1rem; }
        .btn:hover, .icon-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-success { background-color: var(--success-color); color: white; }
        .btn-secondary { background-color: var(--secondary-color); color: white; }
        .icon-btn { background: none; padding: 5px; width: 34px; height: 34px; border-radius: 50%; }
        .icon-btn svg { width: 20px; height: 20px; }
        .icon-btn.remove-btn { color: var(--danger-color); }
        .icon-btn:hover { background-color: rgba(0,0,0,0.05); }

        .toggle-switch { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; }
        .toggle-switch span { transition: color 0.3s, font-weight 0.3s; }
        .toggle-switch input { display: none; }
        .toggle-switch label { cursor: pointer; width: 44px; height: 24px; background: #ccc; display: block; border-radius: 100px; position: relative; margin: 0; }
        .toggle-switch label::after { content: ''; position: absolute; top: 2px; right: 2px; width: 20px; height: 20px; background: #fff; border-radius: 50%; transition: 0.3s; }
        .toggle-switch input:checked + label { background: var(--primary-color); }
        .toggle-switch input:checked + label::after { right: calc(100% - 2px); transform: translateX(100%); }
        .toggle-switch input:not(:checked) ~ .label-rtl { color: var(--primary-color); font-weight: 600; }
        .toggle-switch input:not(:checked) ~ .label-ltr { color: var(--secondary-color); }
        .toggle-switch input:checked ~ .label-rtl { color: var(--secondary-color); }
        .toggle-switch input:checked ~ .label-ltr { color: var(--primary-color); font-weight: 600; }
        
        .settings-box, .output-section { margin-top: 40px; border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .settings-box { padding: 20px; background-color: var(--light-bg); }
        .output-header, .settings-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background-color: var(--header-bg); }
        .output-header h2, .settings-header h4 { margin: 0; border: none; padding: 0; font-size: 1.3rem; }
        .output-header-buttons { display: flex; gap: 10px; }
        #output-code { width: 100%; min-height: 300px; font-family: monospace; direction: ltr; text-align: left; padding: 15px; border-radius: 0; border: none; border-top: 1px solid var(--border-color); background-color: #2b303b; color: #c0c5ce; }
        #output-code:focus { box-shadow: none; }
        .generator-footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color); font-size: 0.9rem; color: #6c757d; }
    </style>
</head>
<body>
    <div class="generator-container">
        <header class="main-header">
            <h1>CodeGenius <small>مولد کد حرفه‌ای</small></h1>
        </header>

        <div id="blocks-container"></div>
        
        <button id="add-main-block-btn" class="btn btn-primary" style="width: 100%;">
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            افزودن بلوک اصلی
        </button>
        
        <div class="settings-box">
            <div class="settings-header" style="padding: 0; background: none; border: none; margin-bottom: 15px;"><h4 style="font-size:1.2rem;">تنظیمات فایل خروجی</h4></div>
            <label for="footer-text-input">متن فوتر (اختیاری)</label>
            <input type="text" id="footer-text-input" placeholder="متن کپی‌رایت..." value="&copy; 2024 - hamed.zandieh@gmail.com">
            <label for="examples-title-input">قالب عنوان بخش مثال‌ها</label>
            <input type="text" id="examples-title-input" placeholder="مثال‌ها برای:" value="مثال‌ها برای">
        </div>
        
        <section class="output-section">
            <header class="output-header">
                <h2>خروجی نهایی</h2>
                <div class="output-header-buttons">
                    <button id="generate-btn" class="btn btn-success btn-lg"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>تولید کد</button>
                    <button id="copy-output-btn" class="btn btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>کپی</button>
                </div>
            </header>
            <textarea id="output-code" readonly placeholder="برای مشاهده خروجی، روی دکمه 'تولید کد' کلیک کنید..."></textarea>
        </section>

        <footer class="generator-footer"><p>طراحی و توسعه توسط <a href="mailto:hamed.zandieh@gmail.com" target="_blank">حامد زندیه</a></p></footer>
    </div>
    <template id="main-block-template">
        <div class="block-editor">
            <div class="block-header">
                <h4>بلوک اصلی</h4>
                <div class="block-header-controls">
                    <div class="toggle-switch"><span class="label-ltr">LTR</span><input type="checkbox" class="direction-toggle-checkbox" id="dir-toggle-{{id}}"><label for="dir-toggle-{{id}}"></label><span class="label-rtl">RTL</span></div>
                    <button class="remove-btn icon-btn" title="حذف بلوک اصلی"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
                </div>
            </div>
            <div class="block-content">
                <label>عنوان</label><input type="text" class="title-input">
                <label>توضیحات</label><textarea class="description-input"></textarea>
                <label>کد</label><textarea class="code-input"></textarea>
                <div class="examples-container"></div>
                <div style="text-align: left; margin-top: 15px;"><button class="add-example-btn btn btn-secondary" style="font-size: 0.9rem; padding: 8px 15px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>افزودن مثال</button></div>
            </div>
        </div>
    </template>
    <template id="example-block-template">
        <div class="example-editor">
            <div class="block-header">
                <h5>مثال</h5>
                <div class="block-header-controls">
                    <div class="toggle-switch"><span class="label-ltr">LTR</span><input type="checkbox" class="direction-toggle-checkbox" id="dir-toggle-{{id}}"><label for="dir-toggle-{{id}}"></label><span class="label-rtl">RTL</span></div>
                    <button class="remove-btn icon-btn" title="حذف مثال"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
                </div>
            </div>
            <div class="block-content" style="padding: 15px 20px 20px;">
                <label>عنوان مثال</label><input type="text" class="title-input">
                <label>توضیحات مثال</label><textarea class="description-input"></textarea>
                <label>کد مثال</label><textarea class="code-input"></textarea>
            </div>
        </div>
    </template>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/trumbowyg@2.27.3/dist/trumbowyg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/trumbowyg@2.27.3/dist/plugins/colors/trumbowyg.colors.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/trumbowyg@2.27.3/dist/langs/fa.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            $.extend(true, $.trumbowyg, { plugins: { base64: { init: function (trumbowyg) { trumbowyg.addBtnDef('base64Image', { ico: 'insertImage', fn: function () { trumbowyg.saveRange(); const fileInput = document.createElement('input'); fileInput.type = 'file'; fileInput.accept = 'image/*'; fileInput.onchange = () => { if (fileInput.files && fileInput.files[0]) { const reader = new FileReader(); reader.onload = (e) => { trumbowyg.restoreRange(); const imgHtml = `<img src="${e.target.result}" style="max-width: 100%; height: auto; border-radius: 4px;" alt="">`; trumbowyg.execCmd('insertHtml', imgHtml); }; reader.readAsDataURL(fileInput.files[0]); } document.body.removeChild(fileInput); }; document.body.appendChild(fileInput).click(); } }); } } } });
            function initTrumbowyg(element) { try { if (jQuery && jQuery.fn.trumbowyg) { $(element).trumbowyg({ lang: 'fa', btns: [['viewHTML'],['undo','redo'],['formatting'],['strong','em','del'],['foreColor','backColor'],['link'],['base64Image'],['justifyLeft','justifyCenter','justifyRight','justifyFull'],['unorderedList','orderedList'],['horizontalRule'],['removeformat']] }); } } catch (e) { console.warn('Trumbowyg failed to load.'); } }
            
            let blockCounter = 0;
            const blocksContainer = document.getElementById('blocks-container');
            const mainBlockTemplate = document.getElementById('main-block-template');
            const exampleBlockTemplate = document.getElementById('example-block-template');

            function addMainBlock() {
                blockCounter++;
                const templateHtml = mainBlockTemplate.innerHTML.replace(/{{id}}/g, blockCounter);
                const newBlock = document.createElement('div');
                newBlock.innerHTML = templateHtml;
                blocksContainer.appendChild(newBlock.firstElementChild);
                const addedBlock = blocksContainer.lastElementChild;
                initTrumbowyg(addedBlock.querySelector('.description-input'));
                addedBlock.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            document.getElementById('add-main-block-btn').addEventListener('click', addMainBlock);
            addMainBlock();

            blocksContainer.addEventListener('change', (e) => {
                if (e.target.matches('.direction-toggle-checkbox')) {
                    const blockEditor = e.target.closest('.block-editor, .example-editor');
                    const newDir = e.target.checked ? 'ltr' : 'rtl';
                    blockEditor.querySelector('.title-input').dir = newDir;
                    $(blockEditor.querySelector('.description-input')).parent().find('.trumbowyg-editor, .trumbowyg-textarea').attr('dir', newDir);
                }
            });
            blocksContainer.addEventListener('click', (e) => {
                const removeBtn = e.target.closest('.remove-btn');
                const addExampleBtn = e.target.closest('.add-example-btn');
                if (removeBtn) { removeBtn.closest('.block-editor, .example-editor').remove(); } 
                else if (addExampleBtn) {
                    blockCounter++;
                    const examplesContainer = addExampleBtn.closest('.block-content').querySelector('.examples-container');
                    const templateHtml = exampleBlockTemplate.innerHTML.replace(/{{id}}/g, blockCounter);
                    const newExample = document.createElement('div');
                    newExample.innerHTML = templateHtml;
                    const parentDirToggle = addExampleBtn.closest('.block-editor').querySelector('.direction-toggle-checkbox');
                    const newExampleToggle = newExample.querySelector('.direction-toggle-checkbox');
                    if (parentDirToggle.checked) { newExampleToggle.checked = true; }
                    examplesContainer.appendChild(newExample.firstElementChild);
                    const addedExample = examplesContainer.lastElementChild;
                    initTrumbowyg(addedExample.querySelector('.description-input'));
                    if (newExampleToggle.checked) { $(addedExample.querySelector('.description-input')).parent().find('.trumbowyg-editor, .trumbowyg-textarea').attr('dir', 'ltr'); addedExample.querySelector('.title-input').dir = 'ltr'; }
                }
            });

            document.getElementById('generate-btn').addEventListener('click', () => {
                let finalHtml = '';
                let currentHue = Math.random();
                const GOLDEN_RATIO = 0.61803398875;
                document.querySelectorAll('.block-editor').forEach(mainBlockEditor => {
                    const baseHue = Math.floor(currentHue * 360);
                    const mainBgColor = `hsl(${baseHue}, 100%, 98%)`;
                    const mainDir = mainBlockEditor.querySelector('.direction-toggle-checkbox').checked ? 'ltr' : 'rtl';
                    const mainTitle = mainBlockEditor.querySelector('.title-input').value.trim();
                    const mainCode = mainBlockEditor.querySelector('.code-input').value.trim();
                    const mainDesc = $(mainBlockEditor.querySelector('.description-input')).data('trumbowyg') ? $(mainBlockEditor.querySelector('.description-input')).trumbowyg('html') : mainBlockEditor.querySelector('.description-input').value.trim().replace(/\n/g, '<br />');

                    let examplesHtml = '';
                    mainBlockEditor.querySelectorAll('.example-editor').forEach(exampleEditor => {
                        const exampleBgColor = `hsl(${baseHue}, ${80 + Math.floor(Math.random() * 15)}%, ${94 + Math.floor(Math.random() * 4)}%)`;
                        const exDir = exampleEditor.querySelector('.direction-toggle-checkbox').checked ? 'ltr' : 'rtl';
                        const exTitle = exampleEditor.querySelector('.title-input').value.trim();
                        const exCode = exampleEditor.querySelector('.code-input').value.trim();
                        const exDesc = $(exampleEditor.querySelector('.description-input')).data('trumbowyg') ? $(exampleEditor.querySelector('.description-input')).trumbowyg('html') : exampleEditor.querySelector('.description-input').value.trim().replace(/\n/g, '<br />');
                        if (exTitle || (exDesc && exDesc !== "<p><br></p>") || exCode) {
                            const exTitleHtml = exTitle ? `<h5 class="description-title">${exTitle}</h5>` : '';
                            const exDescHtml = (exDesc && exDesc !== "<p><br></p>") ? `<div class="description-content">${exDesc}</div>` : '';
                            const exCodeHtml = exCode ? `<div class="code-block"><button class="copy-button">کپی</button><pre><code>${exCode.replace(/</g, '&lt;')}</code></pre></div>` : '';
                            const exDescriptionSection = (exTitleHtml || exDescHtml) ? `<div class="description">${exTitleHtml}${exDescHtml}</div>` : '';
                            examplesHtml += `<div class="example-wrapper" dir="${exDir}" style="background-color: ${exampleBgColor};">${exDescriptionSection}${exCodeHtml}</div>`;
                        }
                    });
                    
                    if (mainTitle || (mainDesc && mainDesc !== "<p><br></p>") || mainCode || examplesHtml) {
                        const mainTitleHtml = mainTitle ? `<h4 class="description-title">${mainTitle}</h4>` : '';
                        const mainDescHtml = (mainDesc && mainDesc !== "<p><br></p>") ? `<div class="description-content">${mainDesc}</div>` : '';
                        const mainCodeHtml = mainCode ? `<div class="code-block"><button class="copy-button">کپی</button><pre><code>${mainCode.replace(/</g, '&lt;')}</code></pre></div>` : '';
                        const mainDescriptionSection = (mainTitleHtml || mainDescHtml) ? `<div class="description">${mainTitleHtml}${mainDescHtml}</div>` : '';
                        const examplesTitlePrefix = document.getElementById('examples-title-input').value.trim() || 'مثال‌ها';
                        const examplesSectionTitle = mainTitle ? `${examplesTitlePrefix}: ${mainTitle}` : 'مثال‌ها';
                        const examplesSection = examplesHtml ? `<div class="examples-section"><h5 class="examples-section-title">${examplesSectionTitle}</h5>${examplesHtml}</div>` : '';
                        finalHtml += `<div class="main-wrapper" dir="${mainDir}" style="background-color: ${mainBgColor};">${mainDescriptionSection}${mainCodeHtml}${examplesSection}</div>`;
                    }
                    currentHue = (currentHue + GOLDEN_RATIO) % 1;
                });
                
                const footerUserInput = document.getElementById('footer-text-input').value.trim();
                let footerHtml = '';
                if (footerUserInput) { footerHtml = `<footer class="output-footer"><p>${footerUserInput}</p><p class="credits">ساخته شده با DOCGenius</p></footer>`; }
                document.getElementById('output-code').value = getFinalHtmlTemplate(finalHtml.trim(), footerHtml);
            });
            
            document.getElementById('copy-output-btn').addEventListener('click', (e) => {
                const btn = e.target.closest('button');
                const outputCode = document.getElementById('output-code');
                if(!outputCode.value) return;
                outputCode.select();
                document.execCommand('copy');
                btn.innerHTML = 'کپی شد!';
                setTimeout(() => { btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>کپی`; }, 2000);
            });

            function getFinalHtmlTemplate(content, footer) {
                const minifiedCSS = `*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;line-height:1.6;background-color:#111827;color:#212529;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.container{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.08);max-width:800px;width:90%}.main-wrapper{padding:20px;margin-bottom:25px;border-radius:10px;border:1px solid #e0e0e0}.main-wrapper:last-child{margin-bottom:0}.description{margin-bottom:15px}.description-title{font-size:1.2rem;font-weight:600;color:#343a40;margin-bottom:8px}.description-content{color:#495057;line-height:1.7;word-wrap:break-word}.description-content p,.description-content ul,.description-content ol{margin-bottom:10px}.description-content img{max-width:100%;height:auto;border-radius:4px}.code-block{background-color:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.07);border-radius:8px;padding:15px;overflow:hidden;direction:ltr;text-align:left;position:relative;margin-top:15px}.description+.code-block{margin-top:0}.code-block pre{margin:0;white-space:pre-wrap;word-wrap:break-word;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,Courier,monospace;font-size:.9rem;color:#343a40;overflow-x:auto;padding-top:10px;background:transparent!important}.copy-button{position:absolute;top:10px;right:10px;background-color:#6c757d;color:#fff;border:none;padding:5px 10px;border-radius:5px;font-size:.85rem;cursor:pointer;opacity:.7;transition:opacity .2s ease,background-color .2s ease}.code-block:hover .copy-button{opacity:1}.copy-button.copied{background-color:#198754;opacity:1}.copy-button:disabled{cursor:default}.examples-section{margin-top:25px;padding:20px;border-top:3px solid rgba(0,0,0,0.08);background-color:rgba(0,0,0,0.02);border-radius:8px}.examples-section-title{font-size:1.1rem;margin-bottom:20px;color:#333}h5.description-title{font-size:1rem;font-weight:600}.example-wrapper{padding:15px;border-radius:8px;margin-bottom:15px;border:1px solid rgba(0,0,0,.05)}.example-wrapper:last-child{margin-bottom:0}.output-footer{text-align:center;margin-top:40px;padding-top:20px;border-top:1px solid #e9ecef;font-size:.85rem;color:#6c757d}.output-footer p{margin:0}.output-footer .credits{font-size:.8rem;margin-top:5px}`;
                const minifiedJS = `function fallbackCopyTextToClipboard(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",t.style.opacity="0",t.setAttribute("readonly",""),document.body.appendChild(t),t.select();let o=!1;try{o=document.execCommand("copy")}catch(e){console.error("Fallback copy failed:",e)}return document.body.removeChild(t),o}document.querySelectorAll(".copy-button").forEach(e=>{const t=e.innerText;e.addEventListener("click",()=>{const o=e.closest(".code-block").querySelector("pre code");if(!o)return;const c=o.innerText;function n(o,n){e.innerText=o,e.classList.add(n),e.disabled=!0,setTimeout(()=>{e.innerText=t,e.classList.remove(n),e.disabled=!1},2e3)}navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(c).then(()=>n("کپی شد!","copied"),()=>{fallbackCopyTextToClipboard(c)?n("کپی شد!","copied"):n("خطا!","error")}):fallbackCopyTextToClipboard(c)?n("کپی شد!","copied"):n("خطا!","error")})});`;
                return `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>نمایش کد</title><style>${minifiedCSS}</style></head><body><div class="container">${content}${footer}</div><script>${minifiedJS}<\/script></body></html>`;
            }
        });
    </script>
</body>
</html>
